# README

This is a movie ticket selling app in the Ruby/Rails framework. It is in progress/not complete. See https://github.com/carlamiles/movie_ticket_sales_app_django for a more complete version in Python/Django. 

After spending a few days getting more acquainted with Ruby and the Rails framework, I began building the movie ticket app in Rails. Right away, I was impressed with the amount of things that Rails does behind the scenes that have to be explicitly done when using Python in the Django framework, which is what I’m more familiar with for building apps. For example, in Rails it isn’t necessary to migrate sessions as it is already available. Another time saving aspect of Rails is how HTML pages are rendered by default, unlike in Django.

While impressed with the Rails framework, I also encountered a few major challenges. Initially, I was unable to run my Rails server both in my Vagrant virtual machine and also on my own operating system. After a day and a half of researching the issue, I realized that I needed an older version of sqlite3 than what was automatically provided when I installed Rails. A YouTube video helped me fix this issue via changing the version of sqlite3 that was listed in my Gemfile.

However, it was a persistent “NoMethodError” bug that I encountered when trying to submit the order information to the database via the order form, redirecting the user to the home page after successful submission, that severely halted my progress. I used various articles and videos to try to fix the issue. I even reached out to a mentor via CodeMentor.io for advice and was told that it was most likely a routing issue. Yet, even with his advice, I didn’t debug the issue in a timely manner. Since time was limited, I decided to try to build the movie ticket app in Python/Django so that I could portray my thought process for building something similar in Ruby on Rails.

Initially, I imagined that I would need two model classes, a User class and a Movie class with a many to many relationship. However, for the sake of time and simplicity, I decided to have just one model class called Order, which would capture all of the user’s personal information as well as their movie selection and payment information. However, I realized the severe limitations of this when it was necessary to make movie sales, movie popularity, and ticket count statistics for the dashboard page. It was difficult to figure out how to sort the information separately since everything was packaged together in the Order class. It is for this reason that there is a limited number of statistics on the dashboard page. In the future, I would definitely have separate model classes for the User, Movie, and Order classes.

I would like to point out that my current version of the movie app would be best for allowing a user to purchase movie tickets only for the current day and not for a day in the future. I did not use date and time fields in my Order model for the movie date and time information simply for the sake of time and because it has been a bit tricky handling date and time information in my database in the past. Yet, ideally I would allow the user to select any date between the current date and the next 7 days for their movie selection.

In order to process a user’s movie ticket order, I decided to use a form on the movie theater homepage to capture the user’s movie selection, movie time, and number of tickets so that I could hold that information in session in order to auto-populate it on the checkout order form. Every time a user selects a movie time, they must enter the number of tickets they are requesting and submit this form. This way, the order total could be calculated and submitted along with the rest of the order information to the database at the same time. For simplicity, I made all movie tickets $9.

In order to account for the fact that there are a limited number of tickets available for each movie time, I search the database to see how many tickets for a particular movie at a certain date and time have been purchased before sending the user to the checkout page. If the seating threshold has been met, a user is redirected back to the homepage and receives a message stating that the requested showtime is sold out. This is not the ideal way of limiting the number of tickets for a particular showtime since this allows the threshold to be surpassed if for example there are 5 tickets left, but a user places an order for 10 tickets. This user would be allowed to complete their order because the threshold was not met before they made their order, only after. In the future, I will figure out a better solution for this.

Lastly, the code for the email confirmation feature is present in the project’s settings.py file and the views.py file. It is commented out to show how this would be accomplished. In the future, I would use environment variables to keep the host email and password safe.
